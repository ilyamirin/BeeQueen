mongo:
    class: 'MongoDB::MongoClient'
            
test_database:
    class: 'Misc::MongoDatabase'
    method: 'get_database'
    args: 
        -  {ref: 'mongo'}
        -  'test'
        
impression_registrar:
    class: 'Impressions::ImpressionStatistics'
    args:
        database: {ref: 'test_database'}
random_strategy: 
    class: 'Impressions::BannersStrategies::RandomStrategy' 
banners_query_builder:
    class: 'Impressions::BannersQueryBuilder'                    
impression_service:
    class: 'Impressions::Impression'
    args:
        database: {ref: 'test_database'}
        banners_strategies : 
            {
                random:  {ref : 'random_strategy'}
            }
        impression_registrar: {ref: 'impression_registrar'}
        banners_query_builder: {ref: 'banners_query_builder'}
clicks_service:
    class: 'Clicks::ClicksService'
    args:
        database: {ref: 'test_database'}
events_service:
    class: 'Events::EventsService'
    args:
        database: {ref: 'test_database'}